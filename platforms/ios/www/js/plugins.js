!function(t){"use strict";t.tesla_responsive=function(e){var a,i,n,r,o;t.isArray(e)&&(a=t(window),i=e.length,i&&(e.sort(function(t,e){return e.width-t.width}),o=function(){for(var t=a.width(),o=0;i>o&&t<e[o].width;)o++;n=i>o?o:void 0,r!==n&&(r=n,void 0!==n&&e[n].action())},a.resize(o),o()))},t.fn.tesla_slider=function(e){return this.each(function(a,i){var n,r,o,s,l,c,u,f,d,v=t(i),g=t.extend({item:".item",next:".next",prev:".prev",container:v,autoplay:!0,autoplayTime:4e3,bullets:'[data-tesla-plugin="bullets"]'},e,{item:v.attr("data-tesla-item"),next:v.attr("data-tesla-next"),prev:v.attr("data-tesla-prev"),container:v.attr("data-tesla-container"),autoplay:"false"!==v.attr("data-tesla-autoplay"),autoplayTime:v.attr("data-tesla-autoplay-time")?parseInt(v.attr("data-tesla-autoplay-time"),10):v.attr("data-tesla-autoplay-time"),bullets:v.attr("data-tesla-bullets"),active:v.attr("data-tesla-active")}),h=g.container instanceof jQuery?g.container:v.find(g.container),p=h.find(g.item),m=v.find(g.bullets),y=v.find(g.next),x=v.find(g.prev),q=p.length-1,w=0;n=function(){var t,e=w;w--,0>w&&(w=q),t=w,h.css({height:Math.max(p.eq(e).outerHeight(!0),p.eq(t).outerHeight(!0))}),p.eq(e).stop(!0,!0).fadeOut(1e3,function(){}),p.eq(w).stop(!0,!0).fadeIn(1e3,function(){h.css({height:p.eq(t).outerHeight(!0)})}),m.trigger("teslaSliderChange",{index:w})},r=function(){var t,e=w;w++,w>q&&(w=0),t=w,h.css({height:Math.max(p.eq(e).outerHeight(!0),p.eq(t).outerHeight(!0))}),p.eq(e).stop(!0,!0).fadeOut(1e3,function(){}),p.eq(w).stop(!0,!0).fadeIn(1e3,function(){h.css({height:p.eq(t).outerHeight(!0)})}),m.trigger("teslaSliderChange",{index:w})},o=function(t){if(t!==w){var e,a=w;w=t,w>q&&(w=0),0>w&&(w=q),e=w,h.css({height:Math.max(p.eq(a).outerHeight(!0),p.eq(e).outerHeight(!0))}),p.eq(a).stop(!0,!0).fadeOut(1e3,function(){}),p.eq(w).stop(!0,!0).fadeIn(1e3,function(){h.css({height:p.eq(e).outerHeight(!0)})})}},s=function(){h.css({position:"relative",height:p.eq(0).outerHeight(!0)}),p.css({position:"absolute",top:0,left:0,right:0}),p.filter(":gt(0)").css({display:"none"}),t(window).resize(function(){h.css({height:p.eq(0).outerHeight(!0)})}),x.click(function(t){return f(),n(),d(),t.preventDefault?void t.preventDefault():!1}),y.click(function(t){return f(),r(),d(),t.preventDefault?void t.preventDefault():!1}),m.on("teslaBulletsClick",function(t,e){return f(),o(e.index),d(),m.trigger("teslaSliderChange",{index:e.index}),t.preventDefault?void t.preventDefault():!1}),p.hover(function(){f()},function(){d()}),u=function(){g.autoplay&&(l=setInterval(r,g.autoplayTime))},f=function(){g.autoplay&&(clearInterval(l),clearTimeout(c))},d=function(){g.autoplay&&(c=setTimeout(u,g.autoplayTime))},u()},q>0&&(imagesLoaded?imagesLoaded(h[0],function(){s()}):s())})},t.fn.tesla_masonry=function(e){return this.each(function(a,i){var n=t(i),r=t.extend({filters:'[data-tesla-plugin="filters"]'},e,{filters:n.attr("data-tesla-filters")}),o=t(r.filters),s=n.children(),l=function(){n.masonry(),o.length&&o.on("teslaFiltersChange",function(t,e){var a,i=e.categories.length,r="",o=n.data("masonry");for(a=0;i>a;a++)a&&(r+=", "),r+="."+e.categories[a];""===r?(o.options.itemSelector=void 0,s.stop(!0,!0).fadeIn(400)):(o.options.itemSelector=r,s.stop(!0,!0),s.filter(r).fadeIn(400),s.not(r).fadeOut(400)),o.reloadItems(),o.layout()})};t.fn.masonry&&(imagesLoaded?imagesLoaded(i,function(){l()}):l())})},t.fn.tesla_filters=function(e){return this.each(function(a,i){var n=t(i),r=t.extend({categories:"[data-category]"},e,{categories:n.attr("data-tesla-category")}),o=n.find(r.categories);o.click(function(e){var a,i=t(this);return i.hasClass("active")?""===i.attr("data-category")?(o.filter('[data-category=""]').removeClass("active"),o.filter('[data-category!=""]').addClass("active")):(o.filter(i).removeClass("active"),o.filter(".active").length||o.filter('[data-category=""]').addClass("active")):""===i.attr("data-category")?(o.filter('[data-category=""]').addClass("active"),o.filter('[data-category!=""]').removeClass("active")):(o.filter('[data-category=""]').removeClass("active"),o.filter(i).addClass("active")),a=o.filter('.active[data-category!=""]').map(function(){return t(this).attr("data-category")}).get(),n.trigger("teslaFiltersChange",{categories:a}),e.preventDefault?void e.preventDefault():!1})})},t.fn.tesla_bullets=function(e){return this.each(function(a,i){var n=t(i),r=t.extend({bullets:">*",hover:!1},e,{bullets:n.attr("data-tesla-selector"),hover:n.attr("data-tesla-hover")}),o=n.find(r.bullets),s="0"===r.hover||"string"==typeof r.hover&&"false"===r.hover.toLowerCase()?!1:Boolean(r.hover),l=function(t){n.trigger("teslaBulletsClick",{index:o.index(this)})};o.eq(0).addClass("active"),o.click(l),s&&o.mouseover(l),n.on("teslaSliderChange",function(t,e){o.filter(".active").removeClass("active"),o.eq(e.index).addClass("active")})})},t.fn.tesla_carousel=function(e){return this.each(function(a,i){var n,r,o,s,l,c,u,f,d,v,g,h,p,m,y,x,q,w,C,b,k,I,S=t(i),D=t.extend({item:".item",next:".next",prev:".prev",container:S,rotate:!0,autoplay:!0},e,{item:S.attr("data-tesla-item"),next:S.attr("data-tesla-next"),prev:S.attr("data-tesla-prev"),container:S.attr("data-tesla-container"),rotate:S.attr("data-tesla-rotate"),autoplay:S.attr("data-tesla-autoplay")}),H=D.container instanceof jQuery?D.container:S.find(D.container),_=H.find(D.item),L=S.find(D.next),T=S.find(D.prev),M=0,B="0"===D.rotate||"string"==typeof D.rotate&&"false"===D.rotate.toLowerCase()?!1:Boolean(D.rotate),O="0"===D.autoplay||"string"==typeof D.autoplay&&"false"===D.autoplay.toLowerCase()?!1:Boolean(D.autoplay);b=function(){O&&(k(),w=void 0!==q?0:setInterval(l,1e3))},k=function(){O&&(clearInterval(w),w=void 0,clearTimeout(C),C=void 0)},I=function(){O&&(k(),C=void 0!==q?0:setTimeout(b,4e3))},s=function(){return M>0?(_.eq(M+r-1).css({"-webkit-transform":"scale(0)"}),M--,_.eq(M).css({"-webkit-transform":"scale(1)"}),H.css({left:String(100*-M/r)+"%"}),!0):!1},o=function(){void 0===q&&(s()||B&&n>M&&(clearInterval(q),q=setInterval(function(){c()||(clearInterval(q),q=void 0)},200)))},c=function(){return n>M?(_.eq(M).css({"-webkit-transform":"scale(0)"}),M++,_.eq(M+r-1).css({"-webkit-transform":"scale(1)"}),H.css({left:String(100*-M/r)+"%"}),!0):!1},l=function(){void 0===q&&(c()||B&&M>0&&(clearInterval(q),clearInterval(w),clearTimeout(C),q=setInterval(function(){s()||(clearInterval(q),q=void 0,void 0!==w&&b(),void 0!==C&&I())},200)))},u=function(){g()},f=function(){g()},d=function(){g()},v=function(){g()},g=function(){x=Math.max.apply(null,_.map(function(){return t(this).outerHeight(!0)}).get()),y=_.outerWidth(!0),r=Math.round(H.width()/y),n=Math.max(_.length-r,0),M=Math.min(M,n),H.css({position:"relative",height:x,"-webkit-transition":"left 0.4s ease-out",left:String(100*-M/r)+"%"}),_.css({position:"absolute",top:0,"-webkit-transition":"-webkit-transform 0.4s ease-out"}).each(function(e){t(this).css({left:String(100*e/r)+"%"})}),h()},h=function(){_.filter(":gt("+String(r)+"),:eq("+String(r)+"),:lt("+String(M)+")").css({"-webkit-transform":"scale(0)"}),_.filter(":gt("+String(M)+"):lt("+String(r)+"),:eq("+String(M)+")").css({"-webkit-transform":"scale(1)"})},m=[{width:0,action:u},{width:768,action:f},{width:992,action:d},{width:1200,action:v}],p=function(){t.tesla_responsive(m),T.click(function(t){return k(),I(),o(),t.preventDefault?void t.preventDefault():!1}),L.click(function(t){return k(),I(),l(),t.preventDefault?void t.preventDefault():!1}),_.click(function(t){k(),I()}),b()},imagesLoaded?imagesLoaded(H[0],function(){p()}):p()})},t(function(){t('[data-tesla-plugin="slider"]').tesla_slider(),t('[data-tesla-plugin="carousel"]').tesla_carousel(),t('[data-tesla-plugin="masonry"]').tesla_masonry(),t('[data-tesla-plugin="filters"]').tesla_filters(),t('[data-tesla-plugin="bullets"]').tesla_bullets()})}(jQuery);